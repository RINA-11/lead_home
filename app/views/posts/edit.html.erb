<div class="posts-edit-wrapper">
  <div class="container">
    <% if @post.errors.any? %>
      <div class="message">
        <p>未入力があります</p>
      </div>
    <% end %>
    
    <%= form_with model: @post, local: true do |f| %>
      <%= f.hidden_field :user_id, value: current_user.id %>
      <table class="table">
        <tbody>
          <tr>
            <th>
              画像 ※
            </th>
            <td>
              <%= f.fields_for :image, @post.build_image do |i| %>
                <div class="field">
                  <%= i.file_field :post_image1, required: true %>
                  <%= i.hidden_field :post_image1_cache %>
                  <%= i.file_field :post_image2 %>
                  <%= i.hidden_field :post_image2_cache %>
                  <%= i.file_field :post_image3 %>
                  <%= i.hidden_field :post_image3_cache %>
                  <%= i.file_field :post_image4 %>
                  <%= i.hidden_field :post_image4_cache %>
                  <%= i.file_field :post_image5 %>
                  <%= i.hidden_field :post_image5_cache %>
                </div>
              <% end %>
              <% if @post.errors.include?(:image) %>
                <p style="color: red;">
                  <%= @post.errors.full_messages_for(:image).first %>
                </p>
              <% end %>
            </td>
          </tr>
          <tr>
            <th>
              動画
            </th>
            <td>
              <div class="field">
                <%= f.file_field :video %>
                <%= f.hidden_field :video_cache %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              投稿の種類 ※
            </th>
            <td>
              <div class="form-check form-check-inline">
                <%= f.collection_radio_buttons :purpose_id, @purposes, :id, :name, class: "form-check-input", required: true %>
                <% if @post.errors.include?(:purpose_id) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:purpose_id).first %>
                  </p>
                <% end %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              日時 ※
            </th>
            <td>
              <div class="form-group">
                <%= f.datetime_field :happened_at, required: true, class: "form-control" %>
                <% if @post.errors.include?(:happened_at) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:happened_at).first %>
                  </p>
                <% end %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              場所 ※
            </th>
            <td>
              <div class="form-group">
                <%= f.label :prefecture_id, "都道府県 ※" %>
                <%= f.collection_select :prefecture_id, @prefectures, :id, :name, { prompt: "選択してください" }, { class: "form-control", required: true } %>
                <% if @post.errors.include?(:prefecture_id) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:prefecture_id).first %>
                  </p>
                <% end %>
              </div>
              <div class="form-group">
                <%= f.label :city_id, "市区町村 ※" %>
                <%= f.select :city_id, options_for_select(@cities.map { |c|[c[:name], c[:id], { "data-id" => c[:prefecture_id] }] }), { prompt: "選択してください" }, { class: "form-control", required: true, id: :city_id } %>
                <% if @post.errors.include?(:city_id) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:city_id).first %>
                  </p>
                <% end %>
              </div>
              <div class="form-group">
                <%= f.label :address_line, "その他" %>
                <%= f.text_field :address_line, class:"form-control" %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              ペットカテゴリー ※
            </th>
            <td>
              <div class="form-group">
                <%= f.collection_select :pet_category_id, @pet_categories, :id, :name, { prompt: "選択してください" }, { class: "form-control", required: true } %>
                <% if @post.errors.include?(:pet_category_id) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:pet_category_id).first %>
                  </p>
                <% end %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              品種
            </th>
            <td>
              <div class="form-group">
                <%= f.text_field :pet_breed, class:"form-control" %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              性別 ※
            </th>
            <td>
              <div class="form-check form-check-inline">
                <%= f.collection_radio_buttons :pet_sex_id, @pet_sexes, :id, :name, class: "form-check-input", required: true %>
                <% if @post.errors.include?(:pet_sex_id) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:pet_sex_id).first %>
                  </p>
                <% end %>
              </div>
            </td>
          </tr>
          <tr>
            <th>
              コメント ※
            </th>
            <td>
              <div class="form-group">
                <%= f.text_area :content, class: "form-control", required: true %>
                <% if @post.errors.include?(:content) %>
                  <p style="color: red;">
                    <%= @post.errors.full_messages_for(:content).first %>
                  </p>
                <% end %>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
      <%= f.submit "保存" %>
    <% end %>
    
  </div>
</div>